!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.normalizr=e():t.normalizr=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=e[n.id];return t[e[n.id]]=n.entityAssignment(e),{result:r}}function o(t,e,n){if(Array.isArray(e)){var r=e.map(function(e){var r=e[n.id];return t[r]=n.entityAssignment(e),r});return{result:r}}}function u(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(e.map&&Object.keys(e.map).forEach(function(i){if("object"==e.group){if(r+=1,1==i.split(".").length){var o=u(t[i],e.map[i],n,r),a=o.result;t[i]=a}else{var c=(0,s["default"])(i.split(".").slice(0,i.split(".").length-1).join("."),t),l=i.split(".")[i.split(".").length-1],f=u(c[l],e.map[i],n,r),a=f.result;c[l]=a}r-=1}else"array"==e.group&&t.forEach(function(t){if(r+=1,1==i.split(".").length){var o=u(t[i],e.map[i],n,r),a=o.result;t[i]=a}else{var c=(0,s["default"])(i.split(".").slice(0,i.split(".").length-1).join("."),t),l=i.split(".")[i.split(".").length-1],f=u(c[l],e.map[i],n,r),a=f.result;c[l]=a}r-=1})}),"array"==e.group){var a;if("string"==typeof e.entityName)n[e.entityName]=n[e.entityName]||{},a=o(n[e.entityName],t,e);else{var c=e,l=[];t.forEach(function(t){e=c.entityName.union[t[c.entityName.key]],n[e.entityName]=n[e.entityName]||{},a=i(n[e.entityName],t,e);var r={};r.id=a.result,r[c.entityName.key]=t[c.entityName.key],l.push(r)}),a.result=l}}else{var a;if("string"==typeof e.entityName)n[e.entityName]=n[e.entityName]||{},a=i(n[e.entityName],t,e);else{var c=e;e=e.entityName.union[t[e.entityName.key]],n[e.entityName]=n[e.entityName]||{},a=i(n[e.entityName],t,e);var f={};f.id=a.result,f[c.entityName.key]=t[c.entityName.key],a.result=f}}return 0!=r?a:{entities:n,result:a.result}}function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.mapping,r=void 0===n?null:n,i=e.id,o=void 0===i?"id":i,u=e.group,a=void 0===u?"object":u,c=e.entityAssignment,l=void 0===c?null:c,l=l||f;return{id:o,entityName:t,group:a,map:r,entityAssignment:l}}function c(t){return Object.assign({},t,{group:"array"})}Object.defineProperty(e,"__esModule",{value:!0}),e.normalizer=void 0,e.simple=i,e.array=o,e.normalize=u,e.schema=a,e.arrayOf=c;var l=n(1),s=r(l),f=function(t){return t};e.normalizer=function(t){return function(e){return u(e,t)}}},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r="[object Array]"===a.call(t)?t:o(i(t)),u=r.length,c=u?e:void 0;++n<u;){if(Object(c)!==c)return;c=c[r[n]]}return"function"==typeof c?c():c}var i=n(3),o=n(5),u=n(2),a=Object.prototype.toString;t.exports=u(r)},function(t,e,n){"use strict";function r(t,e){var n=function(){return 0===arguments.length?n:arguments.length>1?t.apply(e,arguments):i.call(t,e,arguments[0])};return n.uncurry=function(){return t},n}/*!
	 * imports.
	 */
var i=Function.prototype.bind||n(4);/*!
	 * exports.
	 */
t.exports=r},function(t,e){"use strict";function n(t){return"[object String]"=={}.toString.call(t)?t.replace(r,".$1").replace(i,""):""}/*!
	 * exports.
	 */
t.exports=n;/*!
	 * regexp patterns.
	 */
var r=/\[([^\[\]]+)\]/g,i=/^[.]*|[.]*$/g},function(t,e){"use strict";t.exports=function(t){var e,n=this;if(arguments.length<2)e=function(){if(this instanceof e){var r=n.apply(this,arguments);return Object(r)===r?r:this}return n.apply(t,arguments)};else{for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];e=function(){var i,o=r.length,u=new Array(o+arguments.length);for(i=0;o>i;i++)u[i]=r[i];for(i=0;i<arguments.length;i++)u[o+i]=arguments[i];if(this instanceof e){var a=n.apply(this,u);return Object(a)===a?a:this}return n.apply(t,u)}}return e.prototype=n.prototype,e}},function(t,e,n){"use strict";function r(t){return u(i(t))}function i(t){return a(("[object String]"===c.call(t)?t:"").replace(/\\\./g,"ï¿¿").split("."))}function o(t){return t.replace(/\uffff/g,".")}/*!
	 * imports.
	 */
var u=n(8)(o),a=n(6)(String),c=Object.prototype.toString;/*!
	 * exports.
	 */
t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=e.length,r=-1,o=[];++r<n;)i(a(t,e[r]))&&o.push(e[r]);return o}function i(t){for(var e=t.length,n=-1,r=!1;++n<e;){var i=t[n];if(r="[object Function]"==={}.toString.call(i.predicate)?!!i.predicate(i.element):"[object RegExp]"==={}.toString.call(i.predicate)?!!i.predicate.exec(i.element):i.compare?i.predicate===i.element:u(i.predicate,i.element),r===!1)return r}return r}/*!
	 * imports.
	 */
var o=n(2),u=n(1),a=n(7);/*!
	 * exports.
	 */
t.exports=o(r)},function(t,e,n){"use strict";function r(t,e){var n=[];if(o(t)||i(t)||u(t))n.push({predicate:t,element:e});else for(var r in t)n.push({predicate:t[r],element:a(r,e),compare:!0});return n}function i(t){return"[object RegExp]"==={}.toString.call(t)}function o(t){return"[object Function]"==={}.toString.call(t)}function u(t){return"[object String]"==={}.toString.call(t)}/*!
	 * imports.
	 */
var a=n(1);/*!
	 * exports.
	 */
t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=e.length,r=-1,i=[];++r<n;)i.push("string"==typeof t?o(t,e[r]):t(e[r]));return i}/*!
	 * imports.
	 */
var i=n(9),o=n(10);/*!
	 * exports.
	 */
t.exports=i(r)},function(t,e){"use strict";function n(t,e){var n=function(){return arguments.length>1?t.call(e,arguments[0],arguments[1]):t.bind(e,arguments[0])};return n.uncurry=function(){return t},n}/*!
	 * exports.
	 */
t.exports=n},function(t,e){function n(t){function e(t){for(var e=null!=t?t:(0,eval)("this"),r=n.length,i=0;r>i;i+=1)null!=e&&(e=e[n[i]]);return e}var n;return Array.isArray(t)?n=t:(t=t.replace(/\[(\d+)\]/g,".$1"),n=t.split(".")),arguments.length>1?e(arguments[1]):e}/*!
	 * exports.
	 */
t.exports=n}])});